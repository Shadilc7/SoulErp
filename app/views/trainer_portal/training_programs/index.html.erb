<div class="container-fluid py-4">
  <div class="card card-custom mb-4">
    <div class="card-header card-header-custom d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Training Programs</h5>
      <div class="btn-group">
        <%= link_to trainer_portal_training_programs_path, 
            class: "btn btn-outline-custom #{'active' unless params[:status]}" do %>
          <i class="bi bi-grid"></i> All
        <% end %>
        <%= link_to trainer_portal_training_programs_path(status: :ongoing), 
            class: "btn btn-outline-custom #{'active' if params[:status] == 'ongoing'}" do %>
          <i class="bi bi-play-circle"></i> Ongoing
        <% end %>
        <%= link_to trainer_portal_training_programs_path(status: :completed), 
            class: "btn btn-outline-custom #{'active' if params[:status] == 'completed'}" do %>
          <i class="bi bi-check-circle"></i> Completed
        <% end %>
      </div>
    </div>
  </div>

  <div class="row">
    <% if @training_programs.any? %>
      <% @training_programs.each do |program| %>
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="card card-custom h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <h5 class="card-title mb-0"><%= program.title %></h5>
                <span class="badge badge-<%= program.status == 'completed' ? 'success' : 'primary' %>">
                  <%= program.status.titleize %>
                </span>
              </div>
              
              <p class="text-muted small mb-3">
                <i class="bi bi-calendar me-2"></i>
                <%= program.start_date&.strftime("%b %d") %> - <%= program.end_date&.strftime("%b %d, %Y") %>
              </p>

              <p class="card-text text-muted mb-3">
                <%= program.description&.truncate(100) || "No description available" %>
              </p>

              <div class="mb-3">
                <p class="mb-1 small">Progress</p>
                <div class="progress" style="height: 10px;">
                  <div class="progress-bar bg-success" 
                       role="progressbar" 
                       style="width: <%= program.progress || 0 %>%" 
                       aria-valuenow="<%= program.progress || 0 %>" 
                       aria-valuemin="0" 
                       aria-valuemax="100">
                  </div>
                </div>
                <div class="d-flex justify-content-between mt-1">
                  <small class="text-muted"><%= program.progress || 0 %>% Complete</small>
                  <small class="text-muted">
                    <i class="bi bi-person me-1"></i>
                    <%= program.assignee_name %>
                  </small>
                </div>
              </div>

              <%= link_to trainer_portal_training_program_path(program), 
                  class: "btn btn-outline-custom w-100" do %>
                <i class="bi bi-eye me-1"></i> View Details
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="col-12">
        <div class="text-center py-5">
          <i class="bi bi-journal-x display-4 text-muted"></i>
          <p class="mt-3 text-muted">
            No training programs found
            <% if params[:status] %>
              with status "<%= params[:status] %>"
            <% end %>
          </p>
        </div>
      </div>
    <% end %>
  </div>
</div>

<% content_for :styles do %>
  <style>
    .card-custom {
      border: none;
      border-radius: 0.5rem;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
      background-color: #ffffff;
    }

    .card-custom:hover {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
    }

    .card-header-custom {
      background-color: #f8f9fa;
      border-bottom: 1px solid var(--card-border);
      padding: 1.25rem 1.5rem;
    }

    .badge {
      padding: 0.4em 0.65em;
      font-size: 0.75em;
      font-weight: 500;
      border-radius: 0.375rem;
    }

    .badge-primary {
      background-color: var(--primary-color);
      color: #ffffff;
    }

    .badge-success {
      background-color: var(--success-color);
      color: #ffffff;
    }

    .btn-outline-custom.active {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
      color: #ffffff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .progress {
      border-radius: 0.5rem;
      background-color: #e0e0e0;
      height: 8px;
    }

    .progress-bar {
      border-radius: 0.5rem;
      background-color: var(--success-color);
    }

    .text-muted {
      color: var(--text-secondary) !important;
    }

    .btn-group .btn {
      border-radius: 0.375rem;
      margin: 0 0.25rem;
    }

    .btn-group .btn:first-child {
      margin-left: 0;
    }

    .btn-group .btn:last-child {
      margin-right: 0;
    }
  </style>
<% end %>
