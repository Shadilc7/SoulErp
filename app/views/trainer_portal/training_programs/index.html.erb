<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="h4 mb-0">Training Programs</h2>
    <div class="btn-group">
      <%= link_to trainer_portal_training_programs_path, 
          class: "btn btn-outline-primary #{'active' unless params[:status]}" do %>
        <i class="bi bi-grid"></i> All
      <% end %>
      <%= link_to trainer_portal_training_programs_path(status: :ongoing), 
          class: "btn btn-outline-primary #{'active' if params[:status] == 'ongoing'}" do %>
        <i class="bi bi-play-circle"></i> Ongoing
      <% end %>
      <%= link_to trainer_portal_training_programs_path(status: :completed), 
          class: "btn btn-outline-primary #{'active' if params[:status] == 'completed'}" do %>
        <i class="bi bi-check-circle"></i> Completed
      <% end %>
    </div>
  </div>

  <div class="row">
    <% if @training_programs.any? %>
      <% @training_programs.each do |program| %>
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="card card-custom shadow-sm h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <h5 class="card-title mb-0"><%= program.title %></h5>
                <span class="badge <%= program.status == 'completed' ? 'bg-success' : 'bg-primary' %>">
                  <%= program.status.titleize %>
                </span>
              </div>
              
              <p class="text-muted small mb-3">
                <i class="bi bi-calendar me-2"></i>
                <%= program.start_date&.strftime("%b %d") %> - <%= program.end_date&.strftime("%b %d, %Y") %>
              </p>

              <p class="card-text text-muted mb-3">
                <%= program.description&.truncate(100) || "No description available" %>
              </p>

              <div class="mb-3">
                <p class="mb-1 small">Progress</p>
                <div class="progress" style="height: 10px;">
                  <div class="progress-bar bg-success" 
                       role="progressbar" 
                       style="width: <%= program.progress || 0 %>%" 
                       aria-valuenow="<%= program.progress || 0 %>" 
                       aria-valuemin="0" 
                       aria-valuemax="100">
                  </div>
                </div>
                <div class="d-flex justify-content-between mt-1">
                  <small class="text-muted"><%= program.progress || 0 %>% Complete</small>
                  <small class="text-muted">
                    <i class="bi bi-person me-1"></i>
                    <%= program.assignee_name %>
                  </small>
                </div>
              </div>

              <%= link_to trainer_portal_training_program_path(program), 
                  class: "btn btn-sm btn-outline-primary w-100" do %>
                <i class="bi bi-eye me-1"></i> View Details
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="col-12">
        <div class="text-center py-5">
          <i class="bi bi-journal-x display-4 text-muted"></i>
          <p class="mt-3 text-muted">
            No training programs found
            <% if params[:status] %>
              with status "<%= params[:status] %>"
            <% end %>
          </p>
        </div>
      </div>
    <% end %>
  </div>
</div>
